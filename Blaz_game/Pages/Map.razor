@page "/"

<PageTitle>Home</PageTitle>

@{
    // Définir les dimensions de la grille
    int rows = 10;
    int cols = 10;
    int cellSize = 65; // Taille des cases
    int gapSize = 2;   // Espacement entre les cases
}

<div style="position: relative; display: grid; grid-template-columns: repeat(@cols, 1fr); grid-gap: @(gapSize)px; width: calc(@(cols * (cellSize + gapSize))px); background-color: darkslategrey;">
    @for (int row = 0; row < rows; row++)
    {
        for (int col = 0; col < cols; col++)
        {
            <div style="
                border: 1px solid #000;
                height: @(cellSize)px;
            background-image: url('https://us.123rf.com/450wm/tigatelu/tigatelu1708/tigatelu170800094/85233723-vector-illustration-de-la-bande-dessin%C3%A9e-de-la-grotte-avec-des-%C3%A9tincelles.jpg?ver=6');
            background-size: cover;
            background-position: center;">
            </div>
        }
    }
    
    
    <!-- Personnage -->
    <div id="character" style="
        position: absolute;
        width: 40px;
        height: 40px;
        background-image: url('https://e7.pngegg.com/pngimages/356/320/png-clipart-knight-pixel-art-cartoon-knight-sticker-cartoon-thumbnail.png');
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
       margin-left : -15px;
margin-top : -15px;">
    </div>
</div>

<script>
    // Variables pour la position du personnage
    let currentRow = 0;
    let currentCol = 0;

    const character = document.getElementById("character");
    const cellSize = 65; // Taille des cases
    const gapSize = 2;   // Espacement entre les cases
    const rows = 10;     // Nombre de lignes
    const cols = 10;     // Nombre de colonnes

    // Fonction de mise à jour de la position du personnage
    function updateCharacterPosition() {
        character.style.top = `${currentRow * (cellSize + gapSize) + (cellSize / 2 - 3.5)}px`;
        character.style.left = `${currentCol * (cellSize + gapSize) + (cellSize / 2 - 3.5)}px`;
    }

    // Gestion des touches du clavier
    document.addEventListener("keydown", (e) => {
        console.log(`Key pressed: ${e.key}`); // Debugging: Affiche la touche pressée
        e.preventDefault(); // Empêche les comportements par défaut des touches

        if (e.key === "ArrowUp" && currentRow > 0) currentRow--;
        if (e.key === "ArrowDown" && currentRow < rows - 1) currentRow++;
        if (e.key === "ArrowLeft" && currentCol > 0) currentCol--;
        if (e.key === "ArrowRight" && currentCol < cols - 1) currentCol++;

        updateCharacterPosition();
    });

    // Initialiser la position du personnage
    updateCharacterPosition();
</script>
